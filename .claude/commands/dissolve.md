# Claude Command: /dissolve — Intent Dissolution

> **Purpose:** Dissolve a completed intent by extracting its learnings into persistent memory, then removing the intent file. Keeps the repo lean for both finite and ongoing projects.

## Invocation

```
/dissolve "{IdeaFolder}" {IntentNumber}
```

**Examples:**
```
/dissolve "UserAuthentication" 2
/dissolve "PlaywrightScaffold" 5
```

---

## When to Use

- After an intent is marked **Done** in Status.md
- Triggered manually — either via this command or via the dissolution prompt in the BRAIN Iterate phase
- Works for any intent in any project folder under `Intents/`

---

## What Dissolution Does

```
Intent file exists and is Done
  ↓
Extract: Goal, Outcome, Key Decisions, Follow-ups
  ↓
Append structured entry to Memory/{IdeaFolder}.md
  ↓
Aline commit: "dissolved: intent {N} {ShortName} — {outcome}"
  ↓
Delete intent file
  ↓
Update Status.md row → Dissolved ✓
```

**What survives:**
- `CONTEXT.md` — never deleted (defines project scope)
- `Status.md` — never deleted (full progress history, rows marked Dissolved ✓)
- `Memory/{IdeaFolder}.md` — grows with each dissolution (distilled knowledge)

**What is removed:**
- The individual intent `.md` file only

---

## Execution Order

1. **Locate** the intent file: `Intents/{IdeaFolder}/{N}-*.md`
   - If not found: stop and report — do not proceed
   - If Status row is not Done: warn user, ask for confirmation before dissolving

2. **Read** the intent file fully

3. **Extract** the following fields:
   - `Goal` — from the intent's Goal field
   - `Outcome` — from the Outcome → Result field
   - `Key Decisions` — from the Outcome → Key Decisions field (why this approach)
   - `Follow-ups` — from the Outcome → Follow-ups field
   - `Actual Time` — from the Outcome → Actual Time field

4. **Append** a new entry to `Memory/{IdeaFolder}.md`:
   - Create the file from template if it does not exist
   - Append — never overwrite existing entries

   ```md
   ## Intent {N} — {ShortName}
   **Dissolved:** {YYYY-MM-DD}
   **Goal:** {goal}
   **Outcome:** {result}
   **Key Decisions:** {key decisions}
   **Follow-ups:** {follow-ups}
   **Actual Time:** {actual time}

   ---
   ```

5. **Aline commit** the memory update:
   > `use aline — commit: dissolved intent {N} {ShortName} for {IdeaFolder} — {one-line outcome}`

6. **Delete** the intent file: `Intents/{IdeaFolder}/{N}-*.md`

7. **Update** `Status.md`:
   - Find the row for intent {N}
   - Change Status column to `Dissolved ✓`

8. **Report** to user:
   > "Intent {N} ({ShortName}) dissolved.
   > Memory entry added to `Memory/{IdeaFolder}.md`.
   > Aline commit recorded.
   > {N} intent file(s) remaining in `Intents/{IdeaFolder}/`."

---

## Memory File Template (created on first dissolution)

```md
# Memory — {IdeaTitle}

> Auto-generated by /dissolve. Append-only — do not manually edit entries.
> Human-readable distilled log of all dissolved intents for this project.
> AI-readable via Aline commits.

---
```

---

## Safety Rules

- **Never dissolve** an intent that is not marked Done — warn and ask for confirmation
- **Never overwrite** existing Memory entries — always append
- **Never delete** CONTEXT.md or Status.md
- **Never dissolve** multiple intents in a single command — one at a time only
- If the Outcome section is empty: warn user that dissolution will produce low-quality memory, ask to confirm

---

## Notes

- Dissolution is **irreversible** for the local file — but the intent content is preserved in:
  1. `Memory/{IdeaFolder}.md` (distilled summary)
  2. Aline git history (AI-queryable context)
  3. Standard git history (full diff if committed before deletion)
- For ongoing projects, dissolve intents regularly to keep `Intents/` lean
- For finished projects, all intents will eventually be Dissolved ✓ — only CONTEXT.md and Status.md remain as a lightweight archive
